#音楽史クイズ


from discord import app_commands
from utils.quiz_view import QuizView
from config import CHANNELS

# クイズデータ(20問)
QUESTIONS = [
    {
        "text": "問1: 「音楽の父」と呼ばれ、『G線上のアリア』や『ブランデンブルク協奏曲』などで知られるバロック時代の作曲家は誰でしょう？",
        "options": ["ヘンデル", "J.S.バッハ", "ヴィヴァルディ"],
        "correct": 1
    },
    {
        "text": "問2: オペラ『魔笛』や『フィガロの結婚』、交響曲『ジュピター』などを作曲したオーストリアの天才作曲家は誰でしょう？",
        "options": ["ハイドン", "ベートーヴェン", "モーツァルト"],
        "correct": 2
    },
    {
        "text": "問3: 「運命」という愛称で知られる交響曲第5番や、第9番『合唱付き』を作曲したのは誰でしょう？",
        "options": ["ベートーヴェン", "シューベルト", "ブラームス"],
        "correct": 0
    },
    {
        "text": "問4: イタリアの作曲家で、ヴァイオリン協奏曲集『四季』を作曲したのは誰でしょう？",
        "options": ["コレッリ", "ヴィヴァルディ", "スカルラッティ"],
        "correct": 1
    },
    {
        "text": "問5: 100曲以上の交響曲を作曲し、「交響曲の父」と呼ばれている作曲家は誰でしょう？",
        "options": ["ハイドン", "モーツァルト", "サリエリ"],
        "correct": 0
    },
    {
        "text": "問6: 「ピアノの詩人」と呼ばれ、『英雄ポロネーズ』や『幻想即興曲』など、多くのピアノ曲を残したポーランドの作曲家は誰でしょう？",
        "options": ["リスト", "シューマン", "ショパン"],
        "correct": 2
    },
    {
        "text": "問7: 『美しく青きドナウ』など、優雅なウィンナ・ワルツを多く作曲し、「ワルツ王」と呼ばれたのは誰でしょう？",
        "options": ["ヨハン・シュトラウス2世", "リヒャルト・シュトラウス", "オッフェンバック"],
        "correct": 0
    },
    {
        "text": "問8: バッハやヘンデルが活躍した、豪華で装飾的な芸術が栄えた17世紀〜18世紀半ばの音楽様式は何でしょう？",
        "options": ["バロック音楽", "古典派音楽", "ロマン派音楽"],
        "correct": 0
    },
    {
        "text": "問9: モーツァルトやハイドンが活躍し、調和と形式美を重んじた18世紀後半の音楽様式は何でしょう？",
        "options": ["ルネサンス音楽", "バロック音楽", "古典派音楽"],
        "correct": 2
    },
    {
        "text": "問10: ベートーヴェンに始まり、ショパンやリストが活躍した、個人の感情や情熱的な表現を重視した19世紀の音楽様式は何でしょう？",
        "options": ["古典派音楽", "ロマン派音楽", "印象主義音楽"],
        "correct": 1
    },
    {
        "text": "問11: オペラ『カルメン』を作曲したフランスの作曲家は誰でしょう？",
        "options": ["ビゼー", "ドビュッシー", "サン=サーンス"],
        "correct": 0
    },
    {
        "text": "問12: アメリカ滞在中に、交響曲第9番『新世界より』を作曲したチェコの作曲家は誰でしょう？",
        "options": ["スメタナ", "ドヴォルザーク", "ヤナーチェク"],
        "correct": 1
    },
    {
        "text": "問13: 『魔王』や『野ばら』など600曲以上の歌曲(リート)を作曲し、「歌曲の王」と呼ばれたのは誰でしょう？",
        "options": ["シューベルト", "シューマン", "メンデルスゾーン"],
        "correct": 0
    },
    {
        "text": "問14: ロシアの作曲家で、バレエ音楽『白鳥の湖』『くるみ割り人形』などを作曲したのは誰でしょう？",
        "options": ["ムソルグスキー", "リムスキー=コルサコフ", "チャイコフスキー"],
        "correct": 2
    },
    {
        "text": "問15: 『アイーダ』『椿姫』『リゴレット』など、数多くの傑作オペラを作曲したイタリアの作曲家は誰でしょう？",
        "options": ["ヴェルディ", "プッチーニ", "ロッシーニ"],
        "correct": 0
    },
    {
        "text": "問16: ピアノの前身となった鍵盤楽器で、弦を爪(プレクトラム)で弾いて音を出す楽器は何でしょう？",
        "options": ["パイプオルガン", "チェンバロ", "クラヴィコード"],
        "correct": 1
    },
    {
        "text": "問17: 独唱とピアノ伴奏によって、詩の世界を深く表現するドイツの芸術歌曲のことを何と呼ぶでしょう？",
        "options": ["アリア", "リート", "カンタータ"],
        "correct": 1
    },
    {
        "text": "問18: オペラ『蝶々夫人』や『ラ・ボエーム』で知られる、イタリア・オペラの巨匠は誰でしょう？",
        "options": ["ヴェルディ", "ドニゼッティ", "プッチーニ"],
        "correct": 2
    },
    {
        "text": "問19: ノルウェーの作曲家で、劇音楽『ペール・ギュント』組曲(「朝」などが有名)を作曲したのは誰でしょう？",
        "options": ["グリーグ", "シベリウス", "ニールセン"],
        "correct": 0
    },
    {
        "text": "問20: 一定の旋律(主題)が、リズムや和声を変えながら次々と変化していく形式を何と呼ぶでしょう？",
        "options": ["ソナタ", "ロンド", "変奏曲(ヴァリエーション)"],
        "correct": 2
    }
]


def register_commands(tree):
    """コマンドを登録する関数"""
    
    @tree.command(name="音楽史クイズ", description="音楽史に関する20問のクイズに挑戦!")
    async def music_history_quiz(interaction):
        # チャンネルチェック
        if interaction.channel_id not in CHANNELS['music_history_quiz']:
            await interaction.response.send_message(
                "❌ このチャンネルでは音楽史クイズを実行できません。",
                ephemeral=True
            )
            return
        
        # クイズ開始
        view = QuizView(QUESTIONS, 0, 0, [])
        first_question = QUESTIONS[0]
        await interaction.response.send_message(
            f"🎻 **音楽史クイズ**\n\n**問題 1/{len(QUESTIONS)}**\n\n{first_question['text']}",
            view=view
        )